(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{272:function(e,t,n){"use strict";n.r(t);var r=n(8),c=(n(56),n(57),n(70),n(260)),o={name:"Calendar",components:{Multiselect:n.n(c).a},layout:"app",asyncData:function(e){return{code:e.query.code}},data:function(){return{user:{},calendars:[]}},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user=e.$auth.user,!e.code){t.next=5;break}return t.next=4,e.$router.replace({query:{}});case 4:e.saveCalendar(e.code);case 5:if(null===(n=e.user.calendar)||void 0===n||null===(r=n.tokens)||void 0===r||!r.access_token){t.next=8;break}return t.next=8,e.getCalendars();case 8:case"end":return t.stop()}}),t)})))()},methods:{authorizeCalendar:function(){window.location.href="https://accounts.google.com/o/oauth2/v2/auth?access_type=offline&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar.readonly&response_type=code&client_id=311771542120-7so2vnp78pk8u42e1av3gtr6lkhp7304.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fsettings%2Fcalendar"},saveCalendar:function(code){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/google/callback?code=".concat(code));case 3:return e.user=t.sent,t.next=6,e.getCalendars();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getCalendars:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/google/calendars");case 3:e.calendars=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},updateSelectedCalendar:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$patch("/users/".concat(t.user.id),{calendar:{selected:e}});case 3:t.user=n.sent,n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},disconnectCalendar:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$patch("/users/".concat(t.user.id),{calendar:{tokens:null,selected:null}});case 3:t.user=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},l=n(23),component=Object(l.a)(o,(function(){var e,t,n=this,r=n.$createElement,c=n._self._c||r;return c("div",{staticClass:"main-content"},[c("div",{staticClass:"container"},[c("div",{staticClass:"row justify-content-center"},[c("div",{staticClass:"col-12 col-lg-10 col-xl-8 my-4"},[c("div",{staticClass:"header"},[c("div",{staticClass:"header-body"},[c("div",{staticClass:"row align-items-end"},[c("div",{staticClass:"col"},[c("h6",{staticClass:"header-pretitle"},[n._v("\n                  Things we should do...\n                ")]),n._v(" "),c("h1",{staticClass:"header-title"},[n._v("\n                  Connect Google ðŸ”¥\n                ")]),n._v(" "),c("p"),null!==(e=n.user.calendar)&&void 0!==e&&null!==(t=e.tokens)&&void 0!==t&&t.access_token?c("div",[c("multiselect",{attrs:{"track-by":"id",label:"summary",placeholder:"Select an calendar","options-limit":"10","deselect-label":"Field cannot be blank.","no-options":"No objects found.",options:n.calendars,searchable:!0,"allow-empty":!1},on:{select:function(e){return n.updateSelectedCalendar(e)}},model:{value:n.user.calendar.selected,callback:function(e){n.$set(n.user.calendar,"selected",e)},expression:"user.calendar.selected"}},[c("span",{attrs:{slot:"noResult"},slot:"noResult"},[n._v("\n                      No matching objects found.\n                    ")]),n._v(" "),c("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[n._v("\n                      No available objects.\n                    ")])]),n._v(" "),c("button",{staticClass:"btn btn-sm btn-outline-danger mt-3",attrs:{type:"button"},on:{click:function(e){return n.disconnectCalendar()}}},[c("i",{staticClass:"fe fe-zap mr-2"}),n._v("Disconnect\n                  ")])],1):c("div",[c("button",{staticClass:"btn btn-sm btn-outline-primary mt-3",attrs:{type:"button"},on:{click:function(e){return n.authorizeCalendar()}}},[c("i",{staticClass:"fe fe-zap mr-2"}),n._v("Connect\n                  ")])]),n._v(" "),c("p")])])])])])])])])}),[],!1,null,"97763342",null);t.default=component.exports}}]);